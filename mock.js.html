<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: mock.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: mock.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var fetch = require('node-fetch');
var Headers = fetch.Headers;
var Response = fetch.Response;
var stream = require('stream');

var Mock = function (application, configuration) {
  this.application = application;
  this.body = configuration.body;
  this.headers = configuration.headers;
  this.size = configuration.size;
  this.status = configuration.status;
  this.timeout = configuration.timeout;
};

Mock.prototype.call = function (environment) {
  return Promise.resolve(
    new Response(
      this._buildReadableStream(),
      {
        headers: this._getHeaders(),
        size: this.size,
        status: this._getStatus(),
        timeout: this.timeout
      }
    )
  );
};

/**
 * @return {stream.Readable}
 */
Mock.prototype._buildReadableStream = function () {
  var readableStream = new stream.Readable();
  readableStream._read = function () {};
  readableStream.push(this.body);
  readableStream.push(null);
  return readableStream;
};

/**
 * @return {fetch.Headers}
 */
Mock.prototype._getHeaders = function () {
  var headers = new Headers(this.headers || {});
  if (headers.has('Content-Length')) {
    headers.set('Content-Length', this.body.length);
  }
  return headers;
};

/**
 * @return {Integer}
 */
Mock.prototype._getStatus = function () {
  return this.status || 200;
};

module.exports = Mock;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Fetcher.html">Fetcher</a></li><li><a href="Request.html">Request</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Sun Aug 02 2015 12:58:04 GMT+0900 (JST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
